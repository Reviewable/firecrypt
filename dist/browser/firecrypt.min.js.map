{"version":3,"file":"firecrypt.min.js","sources":["src/utils.js","src/FireCryptOnDisconnect.js","src/firecrypt.js"],"sourcesContent":["let _spec;\nlet _encryptionCache;\nlet _decryptionCache;\n\nexport function setSpec(spec) {\n  _spec = cleanSpecification(spec);\n};\n\nexport function setEncryptionCache(cache) {\n  _encryptionCache = cache;\n};\n\nexport function setDecryptionCache(cache) {\n  _decryptionCache = cache;\n};\n\nexport function cleanSpecification(def, path) {\n  var keys = Object.keys(def);\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (key === '.encrypt') {\n      var encryptKeys = Object.keys(def[key]);\n      for (var j = 0; j < encryptKeys.length; j++) {\n        var encryptKey = encryptKeys[j];\n        if (encryptKey !== 'key' && encryptKey !== 'value' && encryptKey !== 'few') {\n          throw new Error('Illegal .encrypt subkey: ' + encryptKeys[j]);\n        }\n      }\n    } else {\n      if (/[\\x00-\\x1f\\x7f\\x91\\x92\\.#\\[\\]/]/.test(key) || /[$]/.test(key.slice(1))) {\n        throw new Error('Illegal character in specification key: ' + key);\n      }\n      cleanSpecification(def[key], (path || '') + '/' + key);\n    }\n    switch (key.charAt(0)) {\n      case '$':\n        if (key === '$') break;\n        if (def.$) throw new Error('Multiple wildcard keys in specification at ' + path);\n        def.$ = def[key];\n        delete def[key];\n        break;\n      case '.':\n        if (key !== '.encrypt') throw new Error('Unknown directive at ' + path + ': ' + key);\n        break;\n    }\n  }\n  return def;\n};\n\nexport function throwNotSetUpError() {\n  var e = new Error('Encryption not set up');\n  e.firecrypt = 'NO_KEY';\n  throw e;\n};\n\nexport function computeCacheItemSize(value, key) {\n  return key.length + (typeof value === 'string' ? value.length : 4);\n};\n\nexport function encryptPath(path, def) {\n  def = def || _spec.rules;\n  path = path.slice();\n  for (var i = 0; i < path.length; i++) {\n    def = def[path[i]] || def.$;\n    if (!def) break;\n    if (def['.encrypt'] && def['.encrypt'].key) {\n      path[i] = encrypt(path[i], 'string', def['.encrypt'].key);\n    }\n  }\n  return path;\n};\n\nexport function encryptRef(ref, path) {\n  var encryptedPath = encryptPath(path || refToPath(ref));\n  return encryptedPath.length ? ref.root().child(encryptedPath.join('/')) : ref.root();\n};\n\nexport function decryptRef(ref) {\n  var path = refToPath(ref, true);\n  var changed = false;\n  for (var i = 0; i < path.length; i++) {\n    var decryptedPathSegment = decrypt(path[i]);\n    if (decryptedPathSegment !== path[i]) {\n      path[i] = decryptedPathSegment;\n      changed = true;\n    }\n  }\n  return changed ? ref.root().child(path.join('/')) : ref;\n};\n\nexport function specForPath(path, def) {\n  def = def || _spec.rules;\n  for (var i = 0; def && i < path.length; i++) {\n    def = def[path[i]] || def.$;\n  }\n  return def;\n};\n\nexport function transformValue(path, value, transform) {\n  return transformTree(value, specForPath(path), transform);\n};\n\nexport function transformTree(value, def, transform) {\n  if (!def) return value;\n  var type = getType(value);\n  var i;\n  if (/^(string|number|boolean)$/.test(type)) {\n    if (def['.encrypt'] && def['.encrypt'].value) {\n      value = transform(value, type, def['.encrypt'].value);\n    }\n  } else if (type === 'object' && value !== null) {\n    var transformedValue = {};\n    for (var key in value) {\n      if (!value.hasOwnProperty(key)) continue;\n      var subValue = value[key], subDef;\n      if (key.indexOf('/') >= 0) {  // for deep update keys\n        var keyParts = key.split('/');\n        subDef = def;\n        for (i = 0; i < keyParts.length; i++) {\n          if (transform === decrypt) {\n            keyParts[i] = decrypt(keyParts[i]);\n            subDef = subDef && (subDef[keyParts[i]] || subDef.$);\n          } else {\n            subDef = subDef && (subDef[keyParts[i]] || subDef.$);\n            if (subDef && subDef['.encrypt'] && subDef['.encrypt'].key) {\n              keyParts[i] = transform(keyParts[i], 'string', subDef['.encrypt'].key);\n            }\n          }\n        }\n        key = keyParts.join('/');\n      } else {\n        if (transform === decrypt) {\n          key = decrypt(key);\n          subDef = def[key] || def.$;\n        } else {\n          subDef = def[key] || def.$;\n          if (subDef && subDef['.encrypt'] && subDef['.encrypt'].key) {\n            key = transform(key, 'string', subDef['.encrypt'].key);\n          }\n        }\n      }\n      transformedValue[key] = transformTree(subValue, subDef, transform);\n    }\n    value = transformedValue;\n  } else if (type === 'array') {\n    if (!def.$) return value;\n    for (i = 0; i < value.length; i++) value[i] = transformTree(value[i], def.$, transform);\n  }\n  return value;\n};\n\nexport function refToPath(ref, encrypted) {\n  var root = ref.root();\n  if (ref === root) return [];\n  var pathStr = decodeURIComponent(ref.toString().slice(root.toString().length));\n  if (!encrypted && pathStr && pathStr.charAt(0) !== '.' &&\n      /[\\x00-\\x1f\\x7f\\x91\\x92\\.#$\\[\\]]/.test(pathStr)) {\n    throw new Error('Path contains invalid characters: ' + pathStr);\n  }\n  return pathStr.split('/');\n};\n\nexport function encrypt(value, type, pattern) {\n  var cacheKey;\n  if (_encryptionCache) {\n    cacheKey = type.charAt(0) + pattern + '\\x91' + value;\n    if (_encryptionCache.has(cacheKey)) return _encryptionCache.get(cacheKey);\n  }\n  var result;\n  if (pattern === '#') {\n    result = encryptValue(value, type);\n  } else {\n    if (type !== 'string') {\n      throw new Error('Can\\'t encrypt a ' + type + ' using pattern [' + pattern + ']');\n    }\n    var match = value.match(compilePattern(pattern));\n    if (!match) {\n      throw new Error(\n        'Can\\'t encrypt as value doesn\\'t match pattern [' + pattern + ']: ' + value);\n    }\n    var i = 0;\n    result = pattern.replace(/[#\\.]/g, function(placeholder) {\n      var part = match[++i];\n      if (placeholder === '#') part = encryptValue(part, 'string');\n      return part;\n    });\n  }\n  if (_encryptionCache) _encryptionCache.set(cacheKey, result);\n  return result;\n};\n\nexport function encryptValue(value, type) {\n  if (!/^(string|number|boolean)$/.test(type)) throw new Error('Can\\'t encrypt a ' + type);\n  switch (type) {\n    case 'number': value = '' + value; break;\n    case 'boolean': value = value ? 't' : 'f'; break;\n  }\n  return '\\x91' + type.charAt(0).toUpperCase() + encryptString(value) + '\\x92';\n};\n\nexport function decrypt(value) {\n  if (_decryptionCache && _decryptionCache.has(value)) return _decryptionCache.get(value);\n  if (!/\\x91/.test(value)) return value;\n  var result;\n  var match = value.match(/^\\x91(.)([^\\x92]*)\\x92$/);\n  if (match) {\n    var decryptedString = decryptString(match[2]);\n    switch (match[1]) {\n      case 'S':\n        result = decryptedString;\n        break;\n      case 'N':\n        result = Number(decryptedString);\n        // Check for NaN, since it's the only value where x !== x.\n        if (result !== result) throw new Error('Invalid encrypted number: ' + decryptedString);\n        break;\n      case 'B':\n        if (decryptedString === 't') result = true;\n        else if (decryptedString === 'f') result = false;\n        else throw new Error('Invalid encrypted boolean: ' + decryptedString);\n        break;\n      default:\n        throw new Error('Invalid encrypted value type code: ' + match[1]);\n    }\n  } else {\n    result = value.replace(/\\x91(.)([^\\x92]*)\\x92/g, function(match, typeCode, encryptedString) {\n      if (typeCode !== 'S') throw new Error('Invalid multi-segment encrypted value: ' + typeCode);\n      return decryptString(encryptedString);\n    });\n  }\n  if (_decryptionCache) _decryptionCache.set(value, result);\n  return result;\n};\n\nexport function getType(value) {\n  if (Array.isArray(value)) return 'array';\n  var type = typeof value;\n  if (type === 'object') {\n    if (value instanceof String) type = 'string';\n    else if (value instanceof Number) type = 'number';\n    else if (value instanceof Boolean) type = 'boolean';\n  }\n  return type;\n};\n\nvar patternRegexes = {};\nexport function compilePattern(pattern) {\n  var regex = patternRegexes[pattern];\n  if (!regex) {\n    regex = patternRegexes[pattern] = new RegExp('^' + pattern\n      .replace(/\\./g, '#')\n      .replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&')  // escape regex chars\n      .replace(/#/g, '(.*?)') + '$');\n  }\n  return regex;\n};\n","import * as utils from './utils';\n\nclass FireCryptOnDisconnect {\n  constructor(path, originalOnDisconnect) {\n    this._path = path;\n    this._originalOnDisconnect = originalOnDisconnect;\n\n    this._interceptOnDisconnectWrite('set', 0);\n    this._interceptOnDisconnectWrite('update', 0);\n    this._interceptOnDisconnectWrite('remove');\n    this._interceptOnDisconnectWrite('setWithPriority', 0);\n    this._interceptOnDisconnectWrite('cancel');\n  }\n\n  _interceptOnDisconnectWrite(methodName, argIndex) {\n    this[methodName] = function() {\n      const args = Array.prototype.slice.call(arguments);\n      if (argIndex >= 0 && argIndex < args.length) {\n        args[argIndex] = utils.transformValue(this._path, args[argIndex], utils.encrypt);\n      }\n\n      return this._originalOnDisconnect[methodName].apply(this._originalOnDisconnect, args);\n    };\n  }\n}\n\nexport default FireCryptOnDisconnect;\n","if (typeof require !== 'undefined') {\n  if (typeof Firebase === 'undefined') global.Firebase = require('firebase');\n  if (typeof LRUCache === 'undefined') global.LRUCache = require('lru-cache');\n  if (typeof CryptoJS === 'undefined') global.CryptoJS = require('crypto-js/core');\n  require('crypto-js/enc-base64');\n  require('cryptojs-extension/build_node/siv');\n  try {\n    require('firebase-childrenkeys');\n  } catch (e) {\n    // ignore, not installed\n  }\n}\n\nCryptoJS.enc.Base64UrlSafe = {\n  stringify: CryptoJS.enc.Base64.stringify,\n  parse: CryptoJS.enc.Base64.parse,\n  _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'\n};\n\n\nvar fbp = Firebase.prototype;\nvar originalQueryFbp = {};\nvar firebaseWrapped = false;\nvar encryptString, decryptString;\n\nimport * as utils from './utils';\nimport FireCryptOnDisconnect from './FireCryptOnDisconnect';\n\nFirebase.initializeEncryption = function(options, specification) {\n  var result;\n  options.cacheSize = options.cacheSize || 5 * 1000 * 1000;\n  options.encryptionCacheSize = options.encryptionCacheSize || options.cacheSize;\n  options.decryptionCacheSize = options.decryptionCacheSize || options.cacheSize;\n  encryptString = decryptString = utils.throwNotSetUpError;\n  if (typeof LRUCache === 'function') {\n    utils.setEncryptionCache(new LRUCache({\n      max: options.encryptionCacheSize, length: utils.computeCacheItemSize\n    }));\n    utils.setDecryptionCache(new LRUCache({\n      max: options.decryptionCacheSize, length: utils.computeCacheItemSize\n    }));\n  }\n  switch (options.algorithm) {\n    case 'aes-siv':\n      if (!options.key) throw new Error('You must specify a key to use AES encryption.');\n      result = setupAesSiv(options.key, options.keyCheckValue);\n      break;\n    case 'passthrough':\n      encryptString = decryptString = function(str) {return str;};\n      break;\n    case 'none':\n      break;\n    default:\n      throw new Error('Unknown encryption algorithm \"' + options.algorithm + '\".');\n  }\n  utils.setSpec(specification);\n  wrapFirebase();\n  return result;\n};\n\nfunction setupAesSiv(key, checkValue) {\n  var siv = CryptoJS.SIV.create(CryptoJS.enc.Base64.parse(key));\n  encryptString = function(str) {\n    return CryptoJS.enc.Base64UrlSafe.stringify(siv.encrypt(str));\n  };\n  decryptString = function(str) {\n    var result = siv.decrypt(CryptoJS.enc.Base64UrlSafe.parse(str));\n    if (result === false) {\n      var e = new Error('Wrong decryption key');\n      e.firecrypt = 'WRONG_KEY';\n      throw e;\n    }\n    return CryptoJS.enc.Utf8.stringify(result);\n  };\n  if (checkValue) decryptString(checkValue);\n  return encryptString(CryptoJS.enc.Base64UrlSafe.stringify(CryptoJS.lib.WordArray.random(10)));\n}\n\nfunction Query(query, order, original) {\n  this._query = query;\n  this._order = order || {};\n  this._original = original || query;\n}\nQuery.prototype.on = function(eventType, callback, cancelCallback, context) {\n  wrapQueryCallback(callback);\n  return this._original.on.call(\n    this._query, eventType, callback.firecryptCallback, cancelCallback, context);\n};\nQuery.prototype.off = function(eventType, callback, context) {\n  if (callback && callback.firecryptCallback) callback = callback.firecryptCallback;\n  return this._original.off.call(this._query, eventType, callback, context);\n};\nQuery.prototype.once = function(eventType, successCallback, failureCallback, context) {\n  wrapQueryCallback(successCallback);\n  return this._original.once.call(\n    this._query, eventType, successCallback && successCallback.firecryptCallback, failureCallback,\n    context\n  ).then(function(snap) {\n    return new Snapshot(snap);\n  });\n};\nQuery.prototype.orderByChild = function(key) {\n  return this._orderBy('orderByChild', 'child', key);\n};\nQuery.prototype.orderByKey = function() {\n  return this._orderBy('orderByKey', 'key');\n};\nQuery.prototype.orderByValue = function() {\n  return this._orderBy('orderByValue', 'value');\n};\nQuery.prototype.orderByPriority = function() {\n  return this._orderBy('orderByPriority', 'priority');\n};\nQuery.prototype.startAt = function(value, key) {\n  this._checkCanSort(key !== undefined);\n  return this._delegate('startAt', arguments);\n};\nQuery.prototype.endAt = function(value, key) {\n  this._checkCanSort(key !== undefined);\n  return this._delegate('endAt', arguments);\n};\nQuery.prototype.equalTo = function(value, key) {\n  if (this._order[this._order.by + 'Encrypted']) {\n    value = utils.encrypt(value, utils.getType(value), this._order[this._order.by + 'Encrypted']);\n  }\n  if (key !== undefined && this._order.keyEncrypted) {\n    key = utils.encrypt(key, 'string', this._order.keyEncrypted);\n  }\n  return new Query(this._original.equalTo.call(this._query, value, key), this._order);\n};\nQuery.prototype.limitToFirst = function() {\n  return this._delegate('limitToFirst', arguments);\n};\nQuery.prototype.limitToLast = function() {\n  return this._delegate('limitToLast', arguments);\n};\nQuery.prototype.limit = function() {\n  return this._delegate('limit', arguments);\n};\nQuery.prototype.ref = function() {\n  return utils.decryptRef(this._original.ref.call(this._query));\n};\nQuery.prototype._delegate = function(methodName, args) {\n  return new Query(this._original[methodName].apply(this._query, args), this._order);\n};\nQuery.prototype._checkCanSort = function(hasExtraKey) {\n  if (this._order.by === 'key' ?\n      this._order.keyEncrypted :\n      this._order.valueEncrypted || hasExtraKey && this._order.keyEncrypted) {\n    throw new Error('Encrypted items cannot be ordered');\n  }\n};\nQuery.prototype._orderBy = function(methodName, by, childKey) {\n  var def = utils.specForPath(utils.refToPath(this.ref()));\n  var order = {by: by};\n  var encryptedChildKey;\n  if (def) {\n    var childPath = childKey && childKey.split('/');\n    for (var subKey in def) {\n      if (!def.hasOwnProperty(subKey)) continue;\n      var subDef = def[subKey];\n      if (subDef['.encrypt']) {\n        if (subDef['.encrypt'].key) order.keyEncrypted = subDef['.encrypt'].key;\n        if (subDef['.encrypt'].value) order.valueEncrypted = subDef['.encrypt'].value;\n      }\n      if (childKey) {\n        var childDef = utils.specForPath(childPath, subDef);\n        if (childDef && childDef['.encrypt'] && childDef['.encrypt'].value) {\n          order.childEncrypted = childDef['.encrypt'].value;\n        }\n        var encryptedChildKeyCandidate = utils.encryptPath(childPath, subDef).join('/');\n        if (encryptedChildKey && encryptedChildKeyCandidate !== encryptedChildKey) {\n          throw new Error(\n            'Incompatible encryption specifications for orderByChild(\"' + childKey + '\")');\n        }\n        encryptedChildKey = encryptedChildKeyCandidate;\n      }\n    }\n  }\n  if (childKey) {\n    return new Query(\n      this._original[methodName].call(this._query, encryptedChildKey || childKey), order);\n  } else {\n    return new Query(this._original[methodName].call(this._query), order);\n  }\n};\n\n\nfunction Snapshot(snap) {\n  this._ref = utils.decryptRef(snap.ref());\n  this._path = utils.refToPath(this._ref);\n  this._snap = snap;\n}\ndelegateSnapshot('exists');\ndelegateSnapshot('hasChildren');\ndelegateSnapshot('numChildren');\ndelegateSnapshot('getPriority');\nSnapshot.prototype.val = function() {\n  return utils.transformValue(this._path, this._snap.val(), utils.decrypt);\n};\nSnapshot.prototype.child = function(childPath) {\n  return new Snapshot(this._snap.child(childPath));\n};\nSnapshot.prototype.forEach = function(action) {\n  return this._snap.forEach(function(childSnap) {\n    return action(new Snapshot(childSnap));\n  });\n};\nSnapshot.prototype.hasChild = function(childPath) {\n  childPath = utils.encryptPath(childPath.split('/'), utils.specForPath(this._path)).join('/');\n  return this._snap.hasChild(childPath);\n};\nSnapshot.prototype.key = function() {\n  return this._ref.key();\n};\nSnapshot.prototype.name = function() {\n  return this._ref.name();\n};\nSnapshot.prototype.ref = function() {\n  return this._ref;\n};\nSnapshot.prototype.exportVal = function() {\n  return utils.transformValue(this._path, this._snap.exportVal(), utils.decrypt);\n};\n\n\nfunction wrapFirebase() {\n  if (firebaseWrapped) return;\n  interceptWrite('set', 0);\n  interceptWrite('update', 0);\n  interceptPush();\n  interceptWrite('setWithPriority', 0);\n  interceptWrite('setPriority');\n  if (fbp.childrenKeys) interceptChildrenKeys();\n  interceptTransaction();\n  interceptOnDisconnect();\n  [\n    'on', 'off', 'once', 'orderByChild', 'orderByKey', 'orderByValue', 'orderByPriority',\n    'startAt', 'endAt', 'equalTo', 'limitToFirst', 'limitToLast', 'limit', 'ref'\n  ].forEach(function(methodName) {interceptQuery(methodName);});\n  firebaseWrapped = true;\n}\n\nfunction interceptWrite(methodName, argIndex) {\n  var originalMethod = fbp[methodName];\n  fbp[methodName] = function() {\n    var path = utils.refToPath(this);\n    var self = utils.encryptRef(this, path);\n    var args = Array.prototype.slice.call(arguments);\n    if (argIndex >= 0 && argIndex < args.length) {\n      args[argIndex] = utils.transformValue(path, args[argIndex], utils.encrypt);\n    }\n    return originalMethod.apply(self, args);\n  };\n}\n\nfunction interceptPush() {\n  // Firebase.push delegates to Firebase.set, which will take care of encrypting the ref and the\n  // argument.\n  var originalMethod = fbp.push;\n  fbp.push = function() {\n    var ref = originalMethod.apply(this, arguments);\n    var decryptedRef = utils.decryptRef(ref);\n    decryptedRef.then = ref.then;\n    decryptedRef.catch = ref.catch;\n    if (ref.finally) decryptedRef.finally = ref.finally;\n    return decryptedRef;\n  };\n}\n\nfunction interceptChildrenKeys() {\n  var originalMethod = fbp.childrenKeys;\n  fbp.childrenKeys = function() {\n    return originalMethod.apply(utils.encryptRef(this), arguments).then(function(keys) {\n      if (!keys.some(function(key) {return /\\x91/.test(key);})) return keys;\n      return keys.map(utils.decrypt);\n    });\n  };\n}\n\nfunction interceptTransaction() {\n  var originalMethod = fbp.transaction;\n  fbp.transaction = function() {\n    var path = utils.refToPath(this);\n    var self = utils.encryptRef(this, path);\n    var args = Array.prototype.slice.call(arguments);\n    var originalCompute = args[0];\n    args[0] = originalCompute && function(value) {\n      value = utils.transformValue(path, value, utils.decrypt);\n      value = originalCompute(value);\n      value = utils.transformValue(path, value, utils.encrypt);\n      return value;\n    };\n    if (args.length > 1) {\n      var originalOnComplete = args[1];\n      args[1] = originalOnComplete && function(error, committed, snapshot) {\n        return originalOnComplete(error, committed, snapshot && new Snapshot(snapshot));\n      };\n    }\n    return originalMethod.apply(self, args).then(function(result) {\n      result.snapshot = result.snapshot && new Snapshot(result.snapshot);\n      return result;\n    });\n  };\n}\n\nfunction interceptOnDisconnect() {\n  var originalMethod = fbp.onDisconnect;\n  fbp.onDisconnect = function() {\n    var path = utils.refToPath(this);\n    return new FireCryptOnDisconnect(path, originalMethod.call(utils.encryptRef(this, path)));\n  };\n}\n\nfunction interceptQuery(methodName) {\n  originalQueryFbp[methodName] = fbp[methodName];\n  fbp[methodName] = function() {\n    var query = new Query(utils.encryptRef(this), {}, originalQueryFbp);\n    return query[methodName].apply(query, arguments);\n  };\n}\n\nfunction wrapQueryCallback(callback) {\n  if (!callback || callback.firecryptCallback) return;\n  var wrappedCallback = function(snap, previousChildKey) {\n    return callback.call(this, new Snapshot(snap), previousChildKey);\n  };\n  wrappedCallback.firecryptCallback = wrappedCallback;\n  callback.firecryptCallback = wrappedCallback;\n}\n\nfunction delegateSnapshot(methodName) {\n  Snapshot.prototype[methodName] = function() {\n    return this._snap[methodName].apply(this._snap, arguments);\n  };\n}\n"],"names":["_spec","_encryptionCache","_decryptionCache","setSpec","spec","cleanSpecification","def","path","keys","Object","i","length","key","encryptKeys","j","encryptKey","Error","test","slice","charAt","$","throwNotSetUpError","e","firecrypt","computeCacheItemSize","value","encryptPath","rules","encrypt","encryptRef","ref","encryptedPath","refToPath","root","child","join","decryptRef","changed","decryptedPathSegment","decrypt","specForPath","transformValue","transform","transformTree","type","getType","transformedValue","hasOwnProperty","subDef","subValue","indexOf","keyParts","split","encrypted","pathStr","decodeURIComponent","toString","pattern","cacheKey","result","has","get","encryptValue","match","regex","patternRegexes","RegExp","replace","compilePattern","placeholder","part","set","toUpperCase","encryptString","decryptedString","decryptString","Number","typeCode","encryptedString","Array","isArray","String","Boolean","FireCryptOnDisconnect","originalOnDisconnect","_path","_originalOnDisconnect","_interceptOnDisconnectWrite","methodName","argIndex","args","prototype","call","arguments","utils","this","apply","require","Firebase","global","LRUCache","CryptoJS","enc","Base64UrlSafe","Base64","stringify","parse","fbp","originalQueryFbp","firebaseWrapped","Query","query","order","original","_query","_order","_original","Snapshot","snap","_ref","_snap","interceptWrite","originalMethod","self","wrapQueryCallback","callback","firecryptCallback","wrappedCallback","previousChildKey","delegateSnapshot","initializeEncryption","options","specification","cache","cacheSize","encryptionCacheSize","decryptionCacheSize","algorithm","checkValue","siv","SIV","create","str","Utf8","lib","WordArray","random","setupAesSiv","keyCheckValue","push","decryptedRef","then","catch","finally","childrenKeys","some","map","interceptChildrenKeys","transaction","originalCompute","originalOnComplete","error","committed","snapshot","onDisconnect","forEach","on","eventType","cancelCallback","context","off","once","successCallback","failureCallback","orderByChild","_orderBy","orderByKey","orderByValue","orderByPriority","startAt","_checkCanSort","undefined","_delegate","endAt","equalTo","by","keyEncrypted","limitToFirst","limitToLast","limit","hasExtraKey","valueEncrypted","childKey","encryptedChildKey","childPath","subKey","childDef","childEncrypted","encryptedChildKeyCandidate","val","action","childSnap","hasChild","name","exportVal"],"mappings":"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"}